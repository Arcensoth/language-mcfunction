{
  "name": "mcfunction",
  "scopeName": "source.mcfunction",
  "fileTypes": [
    "mcfunction"
  ],
  "variables": {
    "token_l": "(?<=\\s)",
    "token_r": "(?=\\s)",
    "resource_location": "(\\#?)([a-z0-9\\._\\-]+)(\\:)([a-z0-9\\._\\-\\/]+)",
    "range": "(-?\\d*\\.?\\d+)?(\\.\\.)(-?\\d*\\.?\\d+)?",
    "number": "-?\\d*\\.?\\d+",
    "coordinate": "([\\~\\^])(-?\\d*\\.?\\d+)?",
    "literal": "[a-z0-9_]+",
    "base_selector": "\\@[a-z]",
    "selector_key": "(\\,?)([a-z0-9_]+)(\\=)(\\!?)"
  },
  "patterns": [
    {
      "include": "#comment"
    },
    {
      "include": "#command"
    }
  ],
  "repository": {
    "comment": {
      "patterns": [
        {
          "name": "comment.number-sign.mcfunction",
          "begin": "^\\s*#",
          "end": "$"
        }
      ]
    },
    "command": {
      "patterns": [
        {
          "name": "keyword.mcfunction",
          "begin": "^\\s*[a-z0-9_]+",
          "end": "$",
          "patterns": [
            {
              "include": "#tokens"
            }
          ]
        }
      ]
    },
    "tokens": {
      "patterns": [
        {
          "include": "#token.selector_without_arguments"
        },
        {
          "include": "#token.selector_with_arguments"
        },
        {
          "include": "#token.resource_location"
        },
        {
          "include": "#token.range"
        },
        {
          "include": "#token.number"
        },
        {
          "include": "#token.relative_coordinate"
        },
        {
          "include": "#token.local_coordinate"
        },
        {
          "include": "#token.literal"
        }
      ]
    },
    "token.selector_without_arguments": {
      "patterns": [
        {
          "name": "entity.name.tag.mcfunction",
          "match": "(?<=\\s)\\@[a-z](?=\\s)"
        }
      ]
    },
    "token.selector_with_arguments": {
      "patterns": [
        {
          "name": "entity.name.tag.mcfunction",
          "begin": "(?<=\\s)\\@[a-z](\\[)",
          "end": "(\\])(?=\\s)",
          "beginCaptures": {
            "1": {
              "name": "markup.bold.mcfunction"
            }
          },
          "endCaptures": {
            "1": {
              "name": "markup.bold.mcfunction"
            }
          },
          "patterns": [
            {
              "include": "#selector_arguments"
            }
          ]
        }
      ]
    },
    "token.resource_location": {
      "patterns": [
        {
          "name": "meta.token.resource_location.mcfunction",
          "match": "(?<=\\s)((\\#?)([a-z0-9\\._\\-]+)(\\:)([a-z0-9\\._\\-\\/]+))(?=\\s)",
          "captures": {
            "1": {
              "patterns": [
                {
                  "include": "#resource_location"
                }
              ]
            }
          }
        }
      ]
    },
    "token.range": {
      "patterns": [
        {
          "name": "meta.token.range.mcfunction",
          "match": "(?<=\\s)((-?\\d*\\.?\\d+)?(\\.\\.)(-?\\d*\\.?\\d+)?)(?=\\s)",
          "captures": {
            "1": {
              "patterns": [
                {
                  "include": "#range"
                }
              ]
            }
          }
        }
      ]
    },
    "token.number": {
      "patterns": [
        {
          "name": "meta.token.number.mcfunction",
          "match": "(?<=\\s)(-?\\d*\\.?\\d+)(?=\\s)",
          "captures": {
            "1": {
              "patterns": [
                {
                  "include": "#number"
                }
              ]
            }
          }
        }
      ]
    },
    "token.coordinate": {
      "patterns": [
        {
          "name": "meta.token.coordinate.mcfunction",
          "match": "(?<=\\s)(([\\~\\^])(-?\\d*\\.?\\d+)?)(?=\\s)",
          "captures": {
            "1": {
              "patterns": [
                {
                  "include": "#coordinate"
                }
              ]
            }
          }
        }
      ]
    },
    "selector_arguments": {
      "patterns": [
        {
          "include": "#selector_argument.resource_location"
        },
        {
          "include": "#selector_argument.range"
        },
        {
          "include": "#selector_argument.number"
        },
        {
          "include": "#selector_argument.literal"
        }
      ]
    },
    "selector.argument_key": {
      "patterns": [
        {
          "name": "meta.selector.argument_key.mcfunction",
          "match": "(\\,?)([a-z0-9_]+)(\\=)(\\!?)",
          "captures": {
            "1": {
              "name": "markup.bold.mcfunction"
            },
            "2": {
              "name": "entity.name.tag.mcfunction"
            },
            "3": {
              "name": "comment.percentage.mcfunction"
            },
            "4": {
              "name": "keyword.control.mcfunction"
            }
          }
        }
      ]
    },
    "selector_argument.resource_location": {
      "patterns": [
        {
          "name": "meta.selector_argument.resource_location.mcfunction",
          "match": "((\\,?)([a-z0-9_]+)(\\=)(\\!?))((\\#?)([a-z0-9\\._\\-]+)(\\:)([a-z0-9\\._\\-\\/]+))",
          "captures": {
            "1": {
              "patterns": [
                {
                  "include": "#selector.argument_key"
                }
              ]
            },
            "6": {
              "patterns": [
                {
                  "include": "#resource_location"
                }
              ]
            }
          }
        }
      ]
    },
    "selector_argument.range": {
      "patterns": [
        {
          "name": "meta.selector_argument.range.mcfunction",
          "match": "((\\,?)([a-z0-9_]+)(\\=)(\\!?))((-?\\d*\\.?\\d+)?(\\.\\.)(-?\\d*\\.?\\d+)?)",
          "captures": {
            "1": {
              "patterns": [
                {
                  "include": "#selector.argument_key"
                }
              ]
            },
            "6": {
              "patterns": [
                {
                  "include": "#range"
                }
              ]
            }
          }
        }
      ]
    },
    "selector_argument.number": {
      "patterns": [
        {
          "name": "meta.selector_argument.number.mcfunction",
          "match": "((\\,?)([a-z0-9_]+)(\\=)(\\!?))(-?\\d*\\.?\\d+)",
          "captures": {
            "1": {
              "patterns": [
                {
                  "include": "#selector.argument_key"
                }
              ]
            },
            "6": {
              "patterns": [
                {
                  "include": "#number"
                }
              ]
            }
          }
        }
      ]
    },
    "selector_argument.literal": {
      "patterns": [
        {
          "name": "meta.selector_argument.literal.mcfunction",
          "match": "((\\,?)([a-z0-9_]+)(\\=)(\\!?))([a-z0-9_]+)",
          "captures": {
            "1": {
              "patterns": [
                {
                  "include": "#selector.argument_key"
                }
              ]
            },
            "6": {
              "patterns": [
                {
                  "include": "#literal"
                }
              ]
            }
          }
        }
      ]
    },
    "resource_location": {
      "patterns": [
        {
          "name": "keyword.operator.mcfunction",
          "match": "(\\#?)([a-z0-9\\._\\-]+)(\\:)([a-z0-9\\._\\-\\/]+)"
        }
      ]
    },
    "range": {
      "patterns": [
        {
          "name": "constant.mcfunction",
          "match": "(-?\\d*\\.?\\d+)?(\\.\\.)(-?\\d*\\.?\\d+)?",
          "captures": {
            "2": {
              "name": "keyword.operator.mcfunction"
            }
          }
        }
      ]
    },
    "number": {
      "patterns": [
        {
          "name": "constant.mcfunction",
          "match": "-?\\d*\\.?\\d+"
        }
      ]
    },
    "coordinate": {
      "patterns": [
        {
          "name": "constant.mcfunction",
          "match": "([\\~\\^])(-?\\d*\\.?\\d+)?"
        }
      ]
    },
    "literal": {
      "patterns": [
        {
          "name": "keyword.operator.mcfunction",
          "match": "[a-z0-9_]+"
        }
      ]
    }
  }
}